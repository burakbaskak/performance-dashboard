!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.perfanalytics=t():e.perfanalytics=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{runPerformanceAnalytic:()=>f});const n=window,r=n.performance,o=(n.navigator,n.Console),a={url:""},i={analytics:[],resources:[]},s=()=>{var e;e=()=>{if(0===i.analytics.length&&0===i.analytics.length)return;let e=new FormData;e.append("data",JSON.stringify(i)),navigator.sendBeacon(`${a.url}/analytics`,e),i.analytics=[],i.resources=[]},"requestIdleCallback"in n?n.requestIdleCallback(e,{timeout:3e3}):e()},c=e=>parseFloat(e.toFixed(4)),l=(e,t)=>{i.analytics.push({name:t,duration:e})},u=e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&l(c(e.startTime/1e3),"fcp")}))},p=(e,t)=>{try{const n=new PerformanceObserver((e=>{t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){o.warn("Error:",e)}return null},d=e=>{e.forEach((e=>{"beacon"!==e.initiatorType&&(({name:e,initiatorType:t,duration:n})=>{i.resources.push({name:e,initiatorType:t,duration:n})})({name:e.name,initiatorType:e.initiatorType,duration:c(e.responseEnd-e.responseStart)})}))},f=e=>{if(!(r&&r.getEntriesByType&&r.now&&r.mark))return;a.url=e;const t=r.getEntriesByType("navigation")[0]||{},o=t.responseStart-t.requestStart;l(c(o),"ttfb"),p("paint",u),p("resource",d),n.onload=()=>{const e=r.timing,t=Date.now()-e.navigationStart;l(t,"pageload");const n=e.domContentLoadedEventEnd-e.navigationStart;l(n,"windowload")},n.onfocus=s,n.onunload=s};return t})()}));